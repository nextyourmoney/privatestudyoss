<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>

    <script>
        function handleCheckData(){
            event.preventDefault();
            let resultChekcData = true;

            //ID유효성 검사
            //첫자는 대소문자이고 뒤자는 숫자, 대소문자를 반드시 한자 이상 포함
            var uidPattern = /^([a-z]|[A-Z])(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,9}$/;
            let uid = document.querySelector("#uid").value;
            var uidPatternTest = uidPattern.test(uid);
            if(uidPatternTest){ //조건 결과에 따라
                document.joinForm.uid.classList.remove("bg-danger");
            } else{
                document.joinForm.uid.classList.add("bg-danger");
                resultChekcData = false;
            }
            /*
            if(uid.length >= 6){
                //document.joinForm.uid.classList.add("bg-danger");
                //var pattern = new RegExp("/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,10}$/");
                //var pattern = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,10}$/; //전부다 소문자, 숫자, 대문자 일경우는 불가하다.
                //var pattern = new RegExp("^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,10}$")
                    / - start of regex
                    ^ - start of line
                    $ - end of line
                    / - end of regex
                    / ... /: ...을 포함하고 있으면 true
                    /^...$/: ...이 정확히 일치하면 true
                //숫자, 대소문자를 반드시 한자 이상 포함
                //var pattern = new RegExp("^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,10}$");
                var result = pattern.test(uid);
                if(result){ //6글자 이상이고 조건 만족일 때 
                    uidCheckResult = true;
                }
            }
            */
           
            //email 유효성 검사
            var emailPattern = /^[a-zA-Z0-9+-\_.]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
            var email = document.querySelector("#email").value;
            var emailPatternTest = emailPattern.test(email);
            if(emailPatternTest){ //조건 결과에 따라
                document.querySelector("#email").classList.remove("bg-danger");
            } else{
                document.querySelector("#email").classList.add("bg-danger");
                resultChekcData = false;
            }

            //password 유효성 검사
            var passwordPattern = /^([a-z]|[A-Z])(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,15}$/;
            var password = document.querySelector("#password").value;
            var passwordPatternTest = passwordPattern.test(password);
            if(passwordPatternTest){ //조건 결과에 따라
                document.querySelector("#password").classList.remove("bg-danger");
            } else{
                document.querySelector("#password").classList.add("bg-danger");
                resultChekcData = false;
            }

            //phone 유효성 검사
            var phonePattern = /^010-\d{3,4}-\d{4}$/;
            var phone = document.querySelector("#phone").value;
            var phonePatternTest = phonePattern.test(phone);
            if(phonePatternTest){ //조건 결과에 따라
                document.querySelector("#phone").classList.remove("bg-danger");
            } else{
                document.querySelector("#phone").classList.add("bg-danger");
                resultChekcData = false;
            }

            //모든 유효성 검사를 통과
            if(resultChekcData){
                document.querySelector("#JoinForm").submit();
            }
            
            
            
        }
    </script>
</head>
<body>
    <div class="card">
        <div class="card-header">
            Form Validate(입력값 유효성 검사);
        </div>

        <div class="card-body">
            <form id="joinForm" name="joinForm" action="#" onsubmit="handleCheckData()">
                <div class="form-group">
                    <label for="uid">UID</label>
                    <input type="text" class="form-control" id="uid" name="uid" value="AbcD12345">
                    <small id = "uidHelp" class = "form-text text-muted">알파벳 대소문자, 숫자를 혼용해서 6자 이상 10자 이하</small>
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" name="email" value="Abc123@mycompany.com">
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" class="form-control" id="password" name="password">
                    <small id = "uidHelp" class = "form-text text-muted">알파벳 대소문자, 숫자를 혼용해서 8자 이상 15자 이하</small>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="text" class="form-control" id="phone" value="010-123-1234"/>
                    <small id = "phoneHelp" class = "form-text text-muted">010 - 3자리 또는 4자리 - 4자리</small>

                </div>

                <div class="form-group">
                    <label for="inputCity">City</label>
                    <select id="inputCity" name="inputCity" class="form-control">
                        <!-- selected은 디폴트 선언 -->
                        <option selected value="seoul">서울</option> 
                        <option value="pusan">부산</option>                            
                        <option value="jeju">제주</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="form-check">
                        <!-- name이 같으면 서버로 넘어갈 때 배열로 넘어간다. -->
                        <input type="checkbox" name="hobby" value="movie" checked>
                        <label> 영화 </label>
                        <input type="checkbox" name="hobby" value="trip">
                        <label> 여행 </label>
                        <input type="checkbox" name="hobby" value="game">
                        <label> 게임 </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-check">
                        <input type="radio" name="job" value="developer">
                        <label> 개발자 </label>
                        <input type="radio" name="job" value="designer" checked>
                        <label> 디자이너 </label>
                        <input type="radio" name="job" value="manager">
                        <label> 매니저 </label>
                    </div>
                </div>
                
                <div class="text-center">
                    <input type="submit" class="btn btn-primary" value = "Join"/>
                    <input type="reset" class="btn btn-primary" value="Reset"/>
                </div> 
            </form>
        </div>
    </div>
</body>
</html>